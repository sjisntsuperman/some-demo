# 大文件上传实现

> 惯例先举例说明下实现思路

## 客户端实现

1. 分为两个端，进行实现，先说客户端
2. 客户端包装一个发送post请求的方法
3. 通过对文件进行分片，并依次上传，分片的原理是通过blob.prototype.slice
4. 在分片的同时，需要对每个切片进行求值，根据内容md5加密，为了性能方面考虑，应该是要放在web-worker里面进行
5. 进度条实现，通过监听XMLRequest里的process的api来监听进度
6. 当切片上传完成后有一个merge的合并请求

## 服务端实现

1. 创建个server，接受切片，并写入到本地文件系统中，以文件hash进行命名，方便下次断点续传使用
2. 几个情况，上传失败进行断点续传，这个时候要遍历找到已上传的切片，并返回200，失败的需要提示重新上传
3. 处理merge请求就是把切片merge成一个文件即可
